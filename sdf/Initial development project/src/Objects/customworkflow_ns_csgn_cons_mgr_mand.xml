<workflow scriptid="customworkflow_ns_csgn_cons_mgr_mand">
  <description>This workflow aims to set the Consignment Manager as Mandatory when the user is specifying this Customer as a consignment customer (when the Inventory Consignment checkbox is checked).</description>
  <initcontexts>ACTION|BANKCONNECTIVITY|BANKSTATEMENTPARSER|BUNDLEINSTALLATION|CLIENT|CSVIMPORT|CUSTOMGLLINES|CUSTOMMASSUPDATE|RECORDACTION|DATASETBUILDER|DEBUGGER|EMAILCAPTURE|FICONNECTIVITY|FIPARSER|MAPREDUCE|OCRPLUGIN|OFFLINECLIENT|OTHER|PAYMENTPOSTBACK|PAYMENTGATEWAY|PLATFORMEXTENSION|PORTLET|PROMOTIONS|CONSOLRATEADJUSTOR|RESTWEBSERVICES|RESTLET|ADVANCEDREVREC|SCHEDULED|SDFINSTALLATION|SHIPPINGPARTNERS|WEBSERVICES|SUITELET|TAXCALCULATION|USEREVENT|USERINTERFACE|WORKBOOKBUILDER|WORKFLOW</initcontexts>
  <initeventtypes></initeventtypes>
  <initlocalizationcontext></initlocalizationcontext>
  <initoncreate>T</initoncreate>
  <initonvieworupdate>T</initonvieworupdate>
  <initsavedsearchcondition></initsavedsearchcondition>
  <inittriggertype></inittriggertype>
  <isinactive>F</isinactive>
  <islogenabled>F</islogenabled>
  <keephistory>ALWAYS</keephistory>
  <name>CONS | Set Consignment Manager Mandatory</name>
  <recordtypes>CUSTOMER|LEAD|PROSPECT</recordtypes>
  <releasestatus>RELEASED</releasestatus>
  <runasadmin>T</runasadmin>
  <initcondition>
    <formula></formula>
    <type>VISUAL_BUILDER</type>
  </initcondition>
  <workflowstates>
    <workflowstate scriptid="workflowstate_ns_csgn_setmand">
      <description></description>
      <donotexitworkflow>F</donotexitworkflow>
      <name>Set Consignment Manager Mandatory</name>
      <positionx>453</positionx>
      <positiony>213</positiony>
      <workflowactions triggertype="AFTERFIELDEDIT">
        <setfieldmandatoryaction scriptid="workflowaction_ns_csgn_mandatory">
          <clienttriggerfields>[scriptid=custentity_ns_csgn_invcosflag]</clienttriggerfields>
          <conditionsavedsearch></conditionsavedsearch>
          <contexttypes>ACTION|BANKCONNECTIVITY|BANKSTATEMENTPARSER|BUNDLEINSTALLATION|CLIENT|CSVIMPORT|CUSTOMGLLINES|CUSTOMMASSUPDATE|RECORDACTION|DATASETBUILDER|DEBUGGER|EMAILCAPTURE|FICONNECTIVITY|FIPARSER|MAPREDUCE|OCRPLUGIN|OFFLINECLIENT|OTHER|PAYMENTPOSTBACK|PAYMENTGATEWAY|PLATFORMEXTENSION|PORTLET|PROMOTIONS|CONSOLRATEADJUSTOR|RESTWEBSERVICES|RESTLET|ADVANCEDREVREC|SCHEDULED|SDFINSTALLATION|SHIPPINGPARTNERS|WEBSERVICES|SUITELET|TAXCALCULATION|USEREVENT|USERINTERFACE|WORKBOOKBUILDER|WORKFLOW</contexttypes>
          <eventtypes></eventtypes>
          <field>[scriptid=custentity_ns_csgn_consignment_manager]</field>
          <isinactive>F</isinactive>
          <ismandatory>T</ismandatory>
          <issublistfield>F</issublistfield>
          <initcondition>
            <formula><![CDATA[isChecked("Inventory Consignment") = 'T']]></formula>
            <type>VISUAL_BUILDER</type>
            <parameters>
              <parameter>
                <name>Inventory Consignment</name>
                <value>[scriptid=custentity_ns_csgn_invcosflag]</value>
              </parameter>
            </parameters>
          </initcondition>
        </setfieldmandatoryaction>
        <setfieldmandatoryaction scriptid="workflowaction_ns_csgn_nonmandatory">
          <clienttriggerfields>[scriptid=custentity_ns_csgn_invcosflag]</clienttriggerfields>
          <conditionsavedsearch></conditionsavedsearch>
          <contexttypes>ACTION|BANKCONNECTIVITY|BANKSTATEMENTPARSER|BUNDLEINSTALLATION|CLIENT|CSVIMPORT|CUSTOMGLLINES|CUSTOMMASSUPDATE|RECORDACTION|DATASETBUILDER|DEBUGGER|EMAILCAPTURE|FICONNECTIVITY|FIPARSER|MAPREDUCE|OCRPLUGIN|OFFLINECLIENT|OTHER|PAYMENTPOSTBACK|PAYMENTGATEWAY|PLATFORMEXTENSION|PORTLET|PROMOTIONS|CONSOLRATEADJUSTOR|RESTWEBSERVICES|RESTLET|ADVANCEDREVREC|SCHEDULED|SDFINSTALLATION|SHIPPINGPARTNERS|WEBSERVICES|SUITELET|TAXCALCULATION|USEREVENT|USERINTERFACE|WORKBOOKBUILDER|WORKFLOW</contexttypes>
          <eventtypes></eventtypes>
          <field>[scriptid=custentity_ns_csgn_consignment_manager]</field>
          <isinactive>F</isinactive>
          <ismandatory>F</ismandatory>
          <issublistfield>F</issublistfield>
          <initcondition>
            <formula><![CDATA[isChecked("Inventory Consignment") = 'F']]></formula>
            <type>VISUAL_BUILDER</type>
            <parameters>
              <parameter>
                <name>Inventory Consignment</name>
                <value>[scriptid=custentity_ns_csgn_invcosflag]</value>
              </parameter>
            </parameters>
          </initcondition>
        </setfieldmandatoryaction>
      </workflowactions>
      <workflowactions triggertype="BEFORESUBMIT">
        <returnusererroraction scriptid="workflowaction_ns_csgn_csverror">
          <clienttriggerfields></clienttriggerfields>
          <conditionsavedsearch></conditionsavedsearch>
          <contexttypes>CSVIMPORT</contexttypes>
          <errortext>The Inventory Consignment checkbox has been marked as checked but a Consignment Manager was not provided. Please add a Consignment Manager to the CSV template and map the Consignment Manager in the CSV Mapping.</errortext>
          <eventtypes>CREATE|EDIT</eventtypes>
          <isinactive>F</isinactive>
          <initcondition>
            <formula><![CDATA[isChecked("Inventory Consignment") = 'T' AND isEmpty("Consignment Manager") = 'T']]></formula>
            <type>VISUAL_BUILDER</type>
            <parameters>
              <parameter>
                <name>Inventory Consignment</name>
                <value>[scriptid=custentity_ns_csgn_invcosflag]</value>
              </parameter>
              <parameter>
                <name>Consignment Manager</name>
                <value>[scriptid=custentity_ns_csgn_consignment_manager]</value>
              </parameter>
            </parameters>
          </initcondition>
        </returnusererroraction>
      </workflowactions>
    </workflowstate>
  </workflowstates>
</workflow>