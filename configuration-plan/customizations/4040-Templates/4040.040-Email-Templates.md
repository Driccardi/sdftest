# 4040.040 - Email Templates Configuration

**Configuration ID**: 4040.040
**Process Area**: Templates & Communications
**Priority**: Medium
**Estimated Effort**: 8 hours
**Dependencies**: 030.020 (Sales Order Workflow), 030.030 (Fulfillment), 030.050 (Return Authorization), 070.010 (Campaign Management)

---

## Business Context

Email communications are critical touchpoints in the customer journey for SunStyle Retail. Professional, branded email templates ensure consistent customer experience across all channels (in-store, e-commerce, mobile) and transaction types. These templates support both transactional communications (order confirmations, shipments) and marketing initiatives (loyalty programs, personalized offers).

### Key Requirements
1. **Consistent Branding**: All emails reflect SunStyle Retail brand identity
2. **Omnichannel Support**: Templates work for orders from any channel
3. **Mobile Responsive**: 60%+ of emails opened on mobile devices
4. **Personalization**: Incorporate customer name, loyalty tier, purchase history
5. **Integration Ready**: Support for Klaviyo (marketing automation) and transactional flows
6. **Compliance**: CAN-SPAM compliant, easy unsubscribe
7. **Actionable**: Clear CTAs, tracking links, return instructions

---

## Email Templates Overview

| Template Name | Type | Trigger | Integration | Priority |
|---------------|------|---------|-------------|----------|
| Order Confirmation | Transactional | Sales Order created | NetSuite native | Critical |
| Shipment Notification | Transactional | Item Fulfillment created | NetSuite native | Critical |
| Delivery Confirmation | Transactional | Tracking shows delivered | Carrier webhook | High |
| Return Label | Transactional | Return Authorization created | NetSuite native | High |
| Refund Processed | Transactional | Customer Refund created | NetSuite native | High |
| Back-in-Stock | Triggered | Inventory > threshold | NetSuite workflow | Medium |
| Abandoned Cart | Marketing | 24hrs no purchase | Klaviyo | Medium |
| Loyalty Points Balance | Marketing | Monthly/triggered | NetSuite workflow | Medium |
| Birthday Offer | Marketing | 7 days before birthday | Klaviyo | Low |

---

## Template Specifications

### 1. Order Confirmation Email

**Template Name**: `Email Template - Order Confirmation`
**Internal ID**: `custemailtmpl_order_confirmation`
**Type**: Transactional
**Record Context**: Sales Order

**Trigger**: Automatically sent when Sales Order status = Pending Fulfillment (after payment authorization)

**Subject Line**:
```
Your SunStyle Order Confirmation - Order #${transaction.tranid}
```

**Content Structure**:

**Header Section**:
- SunStyle logo (linked to website)
- Headline: "Thank You for Your Order, ${customer.firstname}!"
- Order number and date prominently displayed

**Order Summary Section**:
- Order Number: ${transaction.tranid}
- Order Date: ${transaction.trandate}
- Estimated Delivery: ${transaction.custbody_estimated_delivery_date}
- Order Total: ${transaction.total}

**Items Ordered**:
```
For each line item:
- Product image (100x100px)
- Product name
- SKU
- Quantity
- Unit price
- Line total
```

**Pricing Breakdown**:
- Subtotal
- Discount (if applicable): Show ${transaction.custbody_promotion_code}
- Loyalty Points Redeemed: ${transaction.custbody_loyalty_points_redeemed}
- Shipping: ${transaction.shippingcost}
- Tax: ${transaction.taxtotal}
- **Order Total**: ${transaction.total}

**Loyalty Points Earned**:
```
You earned ${transaction.custbody_loyalty_points_earned} points with this order!
Your current balance: ${customer.custentity_loyalty_points} points
```

**Shipping Information**:
- Ship To Address
- Shipping Method: ${transaction.shipmethod}
- Fulfillment Method: ${transaction.custbody_fulfillment_method}
  - If BOPIS: "We'll email you when your order is ready for pickup at [Store Name]"
  - If Curbside: "We'll send pickup instructions when your order is ready"

**Payment Information**:
- Payment Method: Last 4 digits only
- Billing Address

**Customer Service Section**:
- "Questions about your order?"
- Phone: 1-800-SUNSTYLE
- Email: support@sunstyleretail.com
- Hours: Mon-Fri 8am-8pm ET, Sat-Sun 10am-6pm ET

**Footer**:
- Link to Order Status page
- Link to Return Policy (30-day returns)
- Social media icons
- Unsubscribe link (for marketing emails only - not required for transactional)
- Physical address for CAN-SPAM compliance

**Design Notes**:
- Brand colors: Primary blue (#1E3A8A), accent coral (#FF6B6B)
- Font: Inter (web-safe fallback: Arial, sans-serif)
- Max width: 600px
- Mobile responsive with stacked layout
- Alt text for all images

---

### 2. Shipment Notification Email

**Template Name**: `Email Template - Shipment Notification`
**Internal ID**: `custemailtmpl_shipment_notification`
**Type**: Transactional
**Record Context**: Item Fulfillment

**Trigger**: Automatically sent when Item Fulfillment is marked as Shipped

**Subject Line**:
```
Your SunStyle Order Has Shipped! ðŸ“¦ - Order #${transaction.createdfrom.tranid}
```

**Content Structure**:

**Header**:
- SunStyle logo
- Headline: "Your Order Is On Its Way!"
- Tracking number prominently displayed

**Shipment Details**:
- Order Number: ${transaction.createdfrom.tranid}
- Tracking Number: ${transaction.custbody_tracking_number} (hyperlinked to carrier site)
- Carrier: ${transaction.shipmethod}
- Ship Date: ${transaction.trandate}
- Estimated Delivery: ${transaction.custbody_estimated_delivery_date}

**Track Your Package Button**:
```
[Track Your Package] - Large CTA button
Link: ${transaction.custbody_tracking_url}
```

**Items Shipped**:
```
For each line item:
- Product name
- Quantity shipped
- (if partial shipment: "X of Y items")
```

**If Partial Shipment**:
```
Alert box: "This is a partial shipment. Your remaining items will ship separately and you'll receive another notification."
```

**Delivery Address**:
- Ship To Address (confirm where it's going)

**What's Next Section**:
- "Your package should arrive by [date]"
- "You'll receive a delivery confirmation when it arrives"
- "No signature required for orders under $500"

**Prepare for Delivery**:
- "Make sure someone is available to receive the package"
- "Packages may be left at the door for contactless delivery"

**Customer Service**:
- Contact info
- "Need to make changes? Contact us immediately"

**Footer**: Standard footer with links, social, compliance

**Design Notes**:
- Emphasize tracking number and button
- Use icons for shipping stages (Order â†’ Shipped â†’ In Transit â†’ Delivered)

---

### 3. Delivery Confirmation Email

**Template Name**: `Email Template - Delivery Confirmation`
**Internal ID**: `custemailtmpl_delivery_confirmation`
**Type**: Transactional
**Record Context**: Item Fulfillment (updated by workflow)

**Trigger**: Workflow triggered by carrier tracking webhook showing "Delivered" status

**Subject Line**:
```
Your SunStyle Order Has Been Delivered âœ“ - Order #${transaction.createdfrom.tranid}
```

**Content Structure**:

**Header**:
- SunStyle logo
- Headline: "Your Order Has Arrived!"
- Checkmark icon

**Delivery Confirmation**:
- Order Number: ${transaction.createdfrom.tranid}
- Delivered On: ${workflow.deliverydate}
- Delivered To: ${transaction.shipaddress}
- Received By: ${workflow.signedby} (if signature required)

**Items Delivered**:
- List of items with images

**Love Your New Sunglasses?**:
```
We'd love to hear from you!
[Share Your Photos] button - social media integration
[Write a Review] button - link to review page
```

**Product Care Tips**:
- "Clean lenses with microfiber cloth included"
- "Store in protective case when not in use"
- "Avoid extreme heat"
- Link to full care guide

**Protection Plan Offer** (if not already purchased):
```
"Protect your investment! Add an extended warranty for just $XX"
[Learn More] button
```

**Not Happy? No Problem**:
```
"We offer hassle-free 30-day returns"
[Start a Return] button
```

**Customer Service**: Standard contact info

**Footer**: Standard footer

**Design Notes**:
- Celebratory tone
- Encourage engagement (reviews, social sharing)
- Cross-sell opportunity (warranty, accessories)

---

### 4. Return Label Email

**Template Name**: `Email Template - Return Authorization`
**Internal ID**: `custemailtmpl_return_label`
**Type**: Transactional
**Record Context**: Return Authorization

**Trigger**: Automatically sent when Return Authorization is created and approved

**Subject Line**:
```
Your SunStyle Return Has Been Approved - RMA #${transaction.tranid}
```

**Content Structure**:

**Header**:
- SunStyle logo
- Headline: "Your Return Is Approved"

**Return Details**:
- RMA Number: ${transaction.tranid}
- Original Order: ${transaction.createdfrom.tranid}
- Return Deadline: ${transaction.custbody_return_deadline} (30 days from purchase)
- Expected Refund Amount: ${transaction.total}

**Items Being Returned**:
```
For each line item:
- Product name
- Quantity
- Reason: ${transaction.custbody_return_reason}
```

**Return Instructions**:

**Step 1: Package Your Items**
- Place items in original packaging (if available)
- Include all accessories and tags
- Use a sturdy box with padding
- DO NOT include the packing slip

**Step 2: Print Your Return Label**
```
[Download Return Label] button - PDF attachment
```
- Attach label to outside of box
- Cover or remove any other shipping labels

**Step 3: Ship Your Return**
- Drop off at any ${carrier} location
- OR schedule a pickup at ${carrier_pickup_url}
- Track your return at ${return_tracking_url}

**Return Policy Reminder**:
- Items must be unworn with original tags
- Prescription items: defective only
- Refund processed within 5-7 business days after receipt
- Refund to original payment method

**Refund Method**:
- Original Payment Method: ${transaction.custbody_refund_method}
- Estimated refund date: [7-10 business days after delivery]

**Questions?**:
- Email: returns@sunstyleretail.com
- Phone: 1-800-SUNSTYLE
- Chat: Available on our website

**Footer**: Standard footer

**Attachments**:
- Return shipping label (PDF)
- Return instructions (PDF)

**Design Notes**:
- Clear step-by-step instructions with numbering
- Visual icons for each step
- Prominent "Download Label" button
- Reassuring tone

---

### 5. Refund Processed Email

**Template Name**: `Email Template - Refund Processed`
**Internal ID**: `custemailtmpl_refund_processed`
**Type**: Transactional
**Record Context**: Customer Refund

**Trigger**: Automatically sent when Customer Refund is marked as Complete

**Subject Line**:
```
Your SunStyle Refund Has Been Processed - RMA #${transaction.createdfrom.tranid}
```

**Content Structure**:

**Header**:
- SunStyle logo
- Headline: "Your Refund Is On Its Way"

**Refund Details**:
- RMA Number: ${transaction.createdfrom.tranid}
- Original Order: ${transaction.createdfrom.createdfrom.tranid}
- Refund Amount: ${transaction.total}
- Refund Date: ${transaction.trandate}
- Refund Method: ${transaction.custbody_refund_method}

**When Will I See My Refund?**:
```
Your refund of ${transaction.total} has been issued to your ${paymentmethod}.

Depending on your bank or card issuer, it may take:
- Credit/Debit Card: 5-10 business days
- PayPal: 1-3 business days
- Store Credit: Available immediately in your account
```

**Items Refunded**:
```
For each line item:
- Product name
- Quantity
- Amount refunded
```

**Loyalty Points**:
```
If points were redeemed: "XX points have been restored to your account"
If points were earned: "XX points have been deducted from your account"
Current balance: ${customer.custentity_loyalty_points} points
```

**Miss Your Shades Already?**:
```
"We'd love to help you find the perfect pair!"

[Browse Our Collection] button
[Contact Style Consultant] button
```

**We Value Your Feedback**:
```
"Help us improve - tell us why you returned your order"
[Quick Survey] button - 2-3 questions
Incentive: "Get 100 bonus loyalty points for completing our 2-minute survey"
```

**Customer Service**: Standard contact info

**Footer**: Standard footer

**Design Notes**:
- Reassuring and helpful tone
- Clear timeline expectations
- Recovery opportunity (browse, contact consultant)
- Feedback collection

---

### 6. Back-in-Stock Notification Email

**Template Name**: `Email Template - Back in Stock`
**Internal ID**: `custemailtmpl_back_in_stock`
**Type**: Triggered Marketing
**Record Context**: Customer + Item

**Trigger**: Workflow triggered when inventory level > threshold for items on customer watchlist

**Subject Line**:
```
Good News! ${item.name} Is Back in Stock at SunStyle
```

**Content Structure**:

**Header**:
- SunStyle logo
- Headline: "It's Back! âœ¨"

**Hero Section**:
- Large product image (500x500px)
- Product name: ${item.displayname}
- Price: ${item.pricelevel_default}
- If on sale: Original price struck through, sale price in red

**Product Details**:
- Short description
- Key features (bullets)
- Available colors/sizes with swatches
- Limited availability warning if stock < 10 units

**Personalization**:
```
"Hi ${customer.firstname}, the ${item.displayname} you've been waiting for is finally back!"

"You requested this notification on ${customer.custentity_notification_date}"
```

**Urgency Messaging**:
```
If stock < 10 units:
"âš ï¸ Limited Stock - Only ${item.quantityavailable} left!"

"This style sold out in [X] hours last time - don't miss out!"
```

**Primary CTA**:
```
[Shop Now] - Large button
Link: Direct to product page with UTM parameters for tracking
```

**You Might Also Like**:
```
3 related products based on:
- Same brand
- Similar style
- Frequently bought together
```

**Loyalty Reminder**:
```
"Your ${customer.custentity_loyalty_tier} status earns you ${points_multiplier}X points on this purchase!"
```

**Footer**: Standard footer + Unsubscribe link

**Design Notes**:
- Hero image should be compelling
- Strong urgency if low stock
- Mobile-optimized for quick purchasing
- UTM tracking: utm_source=email&utm_medium=back_in_stock&utm_campaign=inventory_alert

---

### 7. Abandoned Cart Email (Klaviyo Integration)

**Template Name**: `Klaviyo - Abandoned Cart Series`
**Platform**: Klaviyo (not NetSuite native)
**Type**: Marketing Automation
**Integration**: NetSuite â†’ Klaviyo (cart data via API)

**Trigger**: Customer adds items to cart but doesn't complete purchase within 24 hours

**Email Series**: 3 emails over 5 days

#### Email 1: Reminder (24 hours after abandonment)

**Subject Line**:
```
You Left Something Behind... ðŸ‘€
OR
${customer.firstname}, Your Sunglasses Are Waiting
```

**Content**:
- "Forget something?" headline
- Cart contents with images
- Original prices
- Subtotal
- "Your cart is waiting" copy
- [Complete Your Purchase] CTA
- Loyalty points reminder: "Earn ${points} points on this order"

#### Email 2: Incentive (48 hours after abandonment)

**Subject Line**:
```
Here's 10% Off Your Order, ${customer.firstname}
```

**Content**:
- Exclusive 10% discount code
- Code expires in 24 hours
- Cart contents reminder
- Updated pricing with discount
- [Claim Your Discount] CTA
- Social proof: "Join 50,000+ happy customers"

#### Email 3: Last Chance (5 days after abandonment)

**Subject Line**:
```
Last Chance - Your Items Won't Last Forever
OR
âš ï¸ Your Cart Expires Soon
```

**Content**:
- Urgency messaging
- Stock availability warning
- Cart contents
- 10% discount code reminder (if not used)
- [Shop Now] CTA
- Alternative: Browse similar products if items sell out

**Klaviyo Flows Configuration**:
```
Trigger: "Added to Cart" event from NetSuite/Shopify
Filter: Did NOT complete purchase within 1 hour
Time Delays: 24h â†’ 48h â†’ 5 days
Exit Conditions:
  - Completes purchase
  - Cart is empty
  - Customer unsubscribes
```

**NetSuite Integration Points**:
- Send cart data to Klaviyo (items, prices, customer)
- Track discount code redemption
- Update customer segmentation based on response

**Design Notes**:
- High-quality product images
- Mobile-optimized
- A/B test subject lines
- Personalized product recommendations

---

### 8. Loyalty Points Balance Email

**Template Name**: `Email Template - Loyalty Points Statement`
**Internal ID**: `custemailtmpl_loyalty_balance`
**Type**: Triggered Marketing
**Record Context**: Customer

**Trigger**:
- Monthly on 1st of month (for all loyalty members)
- OR triggered when points about to expire (60 days before expiration)
- OR triggered when customer reaches new tier threshold

**Subject Line**:
```
Variant 1 (Monthly): "Your SunStyle Loyalty Points Update - ${customer.custentity_loyalty_points} Points Available"
Variant 2 (Expiration): "âš ï¸ ${expiring_points} Points Expiring Soon!"
Variant 3 (Tier Achievement): "ðŸŽ‰ Congratulations! You've Reached ${new_tier} Status"
```

**Content Structure**:

**Header**:
- SunStyle logo
- Personalized greeting: "Hi ${customer.firstname},"

**Loyalty Status Card** (Prominent visual):
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ${customer.custentity_loyalty_tier} Member â”‚
â”‚                             â”‚
â”‚ Current Points: ${customer.custentity_loyalty_points} â”‚
â”‚ Points Value: $${points_value} â”‚
â”‚                             â”‚
â”‚ Next Tier: ${next_tier}    â”‚
â”‚ Points Needed: ${points_needed} â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**This Month's Activity**:
```
Points Earned: +${monthly_earned}
Points Redeemed: -${monthly_redeemed}
Points Expired: -${monthly_expired}
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Net Change: ${net_change}
```

**Points Breakdown**:
```
Recent Transactions (last 30 days):
- Order #12345 - Purchased Ray-Ban Aviators: +250 points
- Order #12340 - Redeemed for $10 off: -100 points
- Birthday Bonus: +200 points
```

**Expiration Alert** (if applicable):
```
âš ï¸ EXPIRING SOON
${expiring_points} points will expire on ${expiration_date}
That's $${expiring_value} in value!

[Use Your Points Now] button
```

**Tier Benefits** (Personalized to customer's tier):
```
Your ${tier} Benefits:
âœ“ ${points_multiplier}X points on every purchase
âœ“ Free shipping on orders over $${threshold}
âœ“ Early access to new collections
âœ“ Birthday month bonus points
âœ“ Exclusive ${tier}-only promotions
```

**How to Earn More Points**:
- Purchases: 1 point per $1 spent
- Product reviews: 50 points per review
- Social sharing: 25 points per share
- Referrals: 500 points per successful referral
- Birthday month: 2X points on all purchases

**Redeem Your Points**:
```
${customer.custentity_loyalty_points} points = $${redemption_value}

[Shop Now & Redeem] button
```

**Featured for You**:
```
Based on your purchase history:
- [Product recommendation 1]
- [Product recommendation 2]
- [Product recommendation 3]

With your points, you could get [Product] for only $XX!
```

**Customer Service**: Standard contact info

**Footer**: Standard footer with unsubscribe

**Design Notes**:
- Gamification elements (progress bars for tier advancement)
- Clear value proposition ($$ value of points)
- Urgency for expiring points
- Personalized product recommendations
- Celebratory design if tier achievement

---

### 9. Birthday Offer Email

**Template Name**: `Klaviyo - Birthday Offer`
**Platform**: Klaviyo (preferred) OR NetSuite
**Type**: Marketing
**Record Context**: Customer

**Trigger**: 7 days before customer's birthday (based on ${customer.custentity_birthdate})

**Subject Line**:
```
Happy Early Birthday, ${customer.firstname}! ðŸŽ‰ Here's Your Gift
OR
Your Birthday Treat Is Here - 20% Off Everything!
```

**Content Structure**:

**Header**:
- SunStyle logo
- Birthday-themed graphics (balloons, confetti)

**Hero Section**:
```
ðŸŽ‚ Happy Birthday Month, ${customer.firstname}!

"Celebrate in Style with Our Birthday Gift to You"
```

**Birthday Offer**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     YOUR BIRTHDAY GIFT      â”‚
â”‚                             â”‚
â”‚   20% OFF EVERYTHING        â”‚
â”‚   + 2X LOYALTY POINTS       â”‚
â”‚   + FREE SHIPPING           â”‚
â”‚                             â”‚
â”‚   Code: BIRTHDAY${year}     â”‚
â”‚   Valid: ${birthday_month}  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[Shop Your Birthday Sale] - Large CTA
```

**Offer Details**:
- Discount Code: BIRTHDAY${year}_${customer.id}
- Discount: 20% off entire purchase
- Loyalty Points: 2X points on birthday month purchases
- Free Shipping: No minimum
- Valid: Entire birthday month (${start_date} - ${end_date})

**Personalized Picks**:
```
"We Picked These Just for You:"

3-4 personalized product recommendations based on:
- Previous purchases
- Browse history
- Style preferences (${customer.custentity_style_preference})
- Face shape (${customer.custentity_face_shape})
```

**Social Sharing**:
```
"Share your birthday look with us!"
#SunStyleBirthday

Post a photo with your new SunStyle shades and tag us for a chance to win a $100 gift card!

[Instagram] [Facebook] [TikTok] icons
```

**Birthday Month Perks Reminder**:
```
All Month Long:
âœ“ 20% off all purchases
âœ“ Double loyalty points
âœ“ Free shipping (no minimum)
âœ“ Free birthday gift with purchase over $100
âœ“ Virtual styling consultation (free)
```

**Gift Suggestion**:
```
"Treating someone else? They deserve SunStyle too!"
[Shop Gift Cards] button
```

**Customer Service**: Standard contact info

**Footer**: Standard footer with unsubscribe

**Klaviyo Flow Configuration** (if using Klaviyo):
```
Trigger: Customer birthday date field
Time Filter: 7 days before birthday
Frequency: Once per year
Personalization:
  - Use birthdate field from NetSuite
  - Use purchase history for recommendations
  - Use style preferences for personalization
Dynamic Content:
  - Product recommendations based on past purchases
  - Personalized imagery based on gender/style preference
A/B Testing:
  - Subject line variations
  - Discount amount (15% vs 20% vs $XX off)
  - Timing (7 days vs 14 days vs on birthday)
```

**Design Notes**:
- Festive, celebratory design
- Clear, prominent discount code
- Easy to redeem on mobile
- Shareable on social media
- VIP treatment feel

---

## Technical Implementation

### NetSuite Configuration

#### Email Template Records
Navigate to: **Customization > Forms > Email Templates > New**

For each transactional template (1-6):

**Settings**:
- Name: As specified above
- Record Type: Select appropriate (Sales Order, Item Fulfillment, etc.)
- Subject: Use Freemarker variables (see examples above)
- Content: HTML + Plain Text versions

**Content Editor**:
- Use HTML editor for rich formatting
- Include Freemarker variables: `${transaction.field}`, `${customer.field}`
- Test with sample data
- Validate mobile responsiveness

**Freemarker Variables Reference**:
```
Transaction Fields:
${transaction.tranid} - Transaction number
${transaction.trandate} - Transaction date
${transaction.total} - Total amount
${transaction.status} - Status
${transaction.custbody_*} - Custom body fields

Customer Fields:
${customer.entityid} - Customer ID
${customer.firstname} - First name
${customer.lastname} - Last name
${customer.email} - Email
${customer.custentity_*} - Custom entity fields

Line Items:
<#list transaction.item as item>
  ${item.item} - Item name
  ${item.quantity} - Quantity
  ${item.rate} - Unit price
  ${item.amount} - Line total
</#list>

Addresses:
${transaction.shipaddress} - Shipping address (formatted)
${transaction.billaddress} - Billing address (formatted)
```

#### Workflow Triggers

**Workflow: Send Order Confirmation**
- Record Type: Sales Order
- Trigger: After Submit
- Condition: Status = Pending Fulfillment
- Action: Send Email
  - Template: custemailtmpl_order_confirmation
  - Recipient: {email}
  - Sender: orders@sunstyleretail.com

**Workflow: Send Shipment Notification**
- Record Type: Item Fulfillment
- Trigger: After Submit
- Condition: Status = Shipped
- Action: Send Email
  - Template: custemailtmpl_shipment_notification
  - Recipient: {createdfrom.email}
  - Sender: orders@sunstyleretail.com

**Workflow: Send Delivery Confirmation**
- Record Type: Item Fulfillment
- Trigger: Scheduled (runs daily)
- Condition: custbody_delivery_status = "Delivered" AND custbody_delivery_email_sent = F
- Action:
  - Send Email (template: custemailtmpl_delivery_confirmation)
  - Set Field: custbody_delivery_email_sent = T

**Workflow: Send Return Label**
- Record Type: Return Authorization
- Trigger: After Submit
- Condition: Status = Pending Approval OR Pending Return
- Action: Send Email
  - Template: custemailtmpl_return_label
  - Recipient: {email}
  - Sender: returns@sunstyleretail.com
  - Attachment: Return label PDF

**Workflow: Send Refund Processed**
- Record Type: Customer Refund
- Trigger: After Submit
- Condition: Status = Completed
- Action: Send Email
  - Template: custemailtmpl_refund_processed
  - Recipient: {customer.email}
  - Sender: returns@sunstyleretail.com

**Workflow: Send Back-in-Stock**
- Record Type: Inventory Item
- Trigger: Scheduled (runs every hour)
- Condition: quantityavailable > reorderpoint AND previously = 0
- Action:
  - Search for customers with item on watchlist
  - For each customer: Send Email (template: custemailtmpl_back_in_stock)

**Workflow: Send Loyalty Balance**
- Record Type: Customer
- Trigger: Scheduled (1st of month, 12:01am)
- Condition: custentity_loyalty_tier != null
- Action: Send Email
  - Template: custemailtmpl_loyalty_balance
  - Recipient: {email}
  - Sender: loyalty@sunstyleretail.com

#### Email Preferences

**Settings > Company > Email Preferences**:
- Default Sender Name: SunStyle Retail
- Default Sender Email: noreply@sunstyleretail.com
- Reply-To Email: support@sunstyleretail.com
- BCC All Outgoing Emails: No (for transactional), Yes for audit trail (optional)

**Department-Specific Senders**:
- Orders: orders@sunstyleretail.com
- Returns: returns@sunstyleretail.com
- Loyalty: loyalty@sunstyleretail.com
- Marketing: marketing@sunstyleretail.com

### Klaviyo Integration

#### Abandoned Cart Flow
- **Connection**: NetSuite â†’ Klaviyo via API or Celigo connector
- **Data Synced**: Cart events, customer data, product catalog
- **Flow Setup**: Create 3-email series as specified above
- **Tracking**: UTM parameters for attribution

#### Birthday Email Flow
- **Connection**: Sync customer birthdate from NetSuite â†’ Klaviyo
- **Flow Trigger**: 7 days before birthdate anniversary
- **Personalization**: Use NetSuite customer data for recommendations
- **Discount Code**: Generate in NetSuite, pass to Klaviyo, or use Klaviyo dynamic codes

### Email Design Assets

#### Required Assets
1. **Logo**: SunStyle primary logo (PNG, transparent, 200x50px)
2. **Brand Colors**:
   - Primary Blue: #1E3A8A
   - Accent Coral: #FF6B6B
   - Neutral Gray: #6B7280
   - Background: #F9FAFB
3. **Typography**:
   - Headings: Inter Bold, 24-28px
   - Body: Inter Regular, 16px
   - Links: Inter Medium, 16px, #1E3A8A
4. **Icons**:
   - Shipping box, checkmark, return arrow, gift, points star
   - Source: Custom or Font Awesome
5. **Social Media Icons**: Instagram, Facebook, TikTok, Twitter
6. **Product Images**: High-res 500x500px minimum

#### Email Template Framework
- **Max Width**: 600px (optimal for email clients)
- **Mobile Breakpoint**: 480px
- **Padding**: 20px outer, 15px inner
- **CTA Buttons**:
  - Size: 200px wide x 50px tall
  - Color: Primary Blue (#1E3A8A)
  - Hover: Darker shade
  - Border radius: 5px
  - Font: Inter Bold, 16px, white text

### Compliance & Deliverability

#### CAN-SPAM Compliance
- **Physical Address**: Include in all emails (footer)
- **Unsubscribe Link**: Required for marketing emails (not transactional)
- **Clear Sender**: "From" field shows "SunStyle Retail"
- **Honest Subject Lines**: No deceptive subjects

#### Best Practices
- **Plain Text Version**: Always include (besides HTML)
- **Alt Text**: All images have descriptive alt text
- **Preheader Text**: Optimize first 50 characters
- **Test Before Send**: Send test emails to team
- **A/B Testing**: Test subject lines, send times, content variations
- **Spam Score Check**: Use tools like Mail-Tester before launch

#### Deliverability Setup
- **SPF Record**: Authorize NetSuite to send on behalf of domain
- **DKIM**: Enable for email authentication
- **DMARC**: Set up policy for email protection
- **Dedicated IP**: Consider for high-volume sending (optional)
- **Warm-Up Period**: Gradually increase email volume

### Personalization Strategy

#### Customer Segmentation
Use NetSuite custom fields for targeting:
- **Loyalty Tier**: Silver/Gold/Platinum (different messaging)
- **Purchase History**: Product recommendations
- **Style Preference**: Personalized product images
- **Channel**: In-store vs online (different tone)
- **Lifecycle Stage**: New customer, active, at-risk, lapsed

#### Dynamic Content Rules
- **If VIP customer**: Show exclusive products, higher discounts
- **If prescription customer**: Highlight prescription-ready styles
- **If eco-conscious**: Feature sustainable products
- **If inactive 90+ days**: Re-engagement campaigns

#### A/B Testing Plan
- **Phase 1 (Month 1)**: Subject line testing
- **Phase 2 (Month 2)**: Send time optimization
- **Phase 3 (Month 3)**: Content layout testing
- **Phase 4 (Month 4)**: Personalization depth testing

### Performance Monitoring

#### Key Metrics
- **Open Rate**: Target >25% (transactional), >20% (marketing)
- **Click-Through Rate**: Target >3.5%
- **Conversion Rate**: Target >1.5% (marketing)
- **Unsubscribe Rate**: Keep <0.5%
- **Bounce Rate**: Keep <2%
- **Spam Complaints**: Keep <0.1%

#### NetSuite Reporting
- **Saved Search**: Email campaign performance
- **Dashboard**: Email KPIs (open, click, convert)
- **Integration**: Klaviyo metrics â†’ NetSuite for unified reporting

#### Optimization Cadence
- **Weekly**: Review metrics, identify issues
- **Monthly**: A/B test results, optimization recommendations
- **Quarterly**: Template refresh, design updates
- **Annually**: Comprehensive email strategy review

---

## Dependencies

### Prerequisites
1. **Branding Assets**: Logo, brand guidelines, imagery library
2. **Customer Data**: Birthdates, preferences, loyalty enrollment
3. **Workflows**: Order processing, fulfillment, returns workflows active
4. **Klaviyo Account**: Set up and integrated with NetSuite
5. **Email Authentication**: SPF, DKIM, DMARC configured

### Integration Requirements
1. **Shopify**: Cart abandonment events â†’ Klaviyo
2. **Carrier APIs**: Tracking webhooks â†’ NetSuite (for delivery confirmation)
3. **Klaviyo â†” NetSuite**: Bidirectional customer data sync
4. **PDF Generation**: Return labels via ShipStation or NetSuite

---

## Testing Plan

### Pre-Launch Testing

**Template Testing**:
- âœ… Render correctly in major email clients (Gmail, Outlook, Apple Mail, Yahoo)
- âœ… Mobile responsive (iOS Mail, Gmail app, Outlook mobile)
- âœ… All links work and point to correct URLs
- âœ… Freemarker variables populate correctly with test data
- âœ… Images display correctly (no broken images)
- âœ… Alt text present for accessibility
- âœ… Plain text version readable
- âœ… Spam score <5 (using Mail-Tester)

**Workflow Testing**:
- âœ… Order confirmation triggers on correct status
- âœ… Shipment notification sends with tracking link
- âœ… Return label includes PDF attachment
- âœ… Refund email sends after refund completion
- âœ… Back-in-stock detects inventory changes correctly
- âœ… Loyalty balance calculates points accurately
- âœ… Birthday email triggers 7 days before birthdate

**Integration Testing**:
- âœ… Klaviyo receives abandoned cart events from NetSuite/Shopify
- âœ… Birthday flow uses correct NetSuite birthdate data
- âœ… Discount codes from emails validate at checkout
- âœ… Email clicks tracked in NetSuite (UTM parameters)

### User Acceptance Testing

**Test Scenarios**:
1. Place test order â†’ Verify order confirmation received
2. Ship test order â†’ Verify shipment notification with tracking
3. Mark delivered â†’ Verify delivery confirmation
4. Create return â†’ Verify return label email with PDF
5. Process refund â†’ Verify refund confirmation
6. Add item to watchlist, increase inventory â†’ Verify back-in-stock
7. Test customer with birthday in 7 days â†’ Verify birthday email
8. Abandon cart â†’ Verify 3-email series (Klaviyo)
9. Monthly on 1st â†’ Verify loyalty balance email

**Feedback Collection**:
- Internal team review (5+ stakeholders)
- Pilot group of 50 customers (opt-in beta testers)
- Collect feedback on design, clarity, functionality
- Iterate based on feedback before full launch

---

## Implementation Checklist

### Week 1: Setup & Design
- [ ] Gather brand assets (logo, colors, fonts, imagery)
- [ ] Design HTML email templates (all 9 templates)
- [ ] Create plain text versions
- [ ] Review and approve designs with Marketing team
- [ ] Set up email authentication (SPF, DKIM, DMARC)

### Week 2: NetSuite Configuration
- [ ] Create email template records in NetSuite (templates 1-6)
- [ ] Configure Freemarker variables
- [ ] Test templates with sample transaction data
- [ ] Set up department email addresses (orders@, returns@, loyalty@)
- [ ] Configure email preferences

### Week 3: Workflow Setup
- [ ] Create workflow: Order Confirmation
- [ ] Create workflow: Shipment Notification
- [ ] Create workflow: Delivery Confirmation (requires carrier webhook)
- [ ] Create workflow: Return Label (with PDF attachment)
- [ ] Create workflow: Refund Processed
- [ ] Create workflow: Back-in-Stock Notification
- [ ] Create workflow: Loyalty Points Balance (monthly)

### Week 4: Klaviyo Integration
- [ ] Connect NetSuite to Klaviyo (via API or Celigo)
- [ ] Sync customer data (name, email, birthdate, loyalty tier)
- [ ] Sync product catalog
- [ ] Set up abandoned cart event tracking
- [ ] Create Klaviyo flow: Abandoned Cart (3 emails)
- [ ] Create Klaviyo flow: Birthday Email
- [ ] Test flows with test data

### Week 5: Testing & Optimization
- [ ] Send test emails to team (all templates)
- [ ] Test on multiple devices and email clients
- [ ] Check spam scores
- [ ] Verify all links and CTAs work
- [ ] Test workflows with real data (in sandbox)
- [ ] Conduct UAT with pilot group
- [ ] Fix issues and iterate

### Week 6: Launch & Monitor
- [ ] Launch to production
- [ ] Monitor email metrics daily (first week)
- [ ] Address any deliverability issues
- [ ] Collect feedback from customers and team
- [ ] Document any issues and resolutions
- [ ] Plan optimization roadmap

---

## Training & Documentation

### User Training
**Audience**: Customer Service, Marketing, Operations teams

**Topics**:
- How email templates are triggered
- How to manually send templates (if needed)
- How to update email content (Marketing team)
- How to troubleshoot email delivery issues
- How to interpret email performance metrics

**Materials**:
- Email template user guide (PDF)
- Video walkthrough of email workflows
- FAQ document
- Quick reference card

### Admin Documentation
**Audience**: NetSuite Administrators

**Topics**:
- Email template architecture
- Freemarker variable reference
- Workflow configuration
- Klaviyo integration setup
- Troubleshooting guide
- How to create new templates

---

## Success Metrics

### Email Performance Targets

| Metric | Transactional Emails | Marketing Emails |
|--------|----------------------|------------------|
| Open Rate | >40% | >25% |
| Click-Through Rate | >10% | >3.5% |
| Conversion Rate | N/A | >1.5% |
| Unsubscribe Rate | <0.2% | <0.5% |
| Bounce Rate | <2% | <2% |
| Spam Complaints | <0.05% | <0.1% |

### Business Impact Targets
- **Order Confirmation**: 95%+ customers receive within 5 minutes of order
- **Shipment Notification**: 95%+ customers receive within 1 hour of shipment
- **Abandoned Cart Recovery**: 15% conversion rate (industry benchmark: 10-15%)
- **Birthday Email**: 25% redemption rate
- **Back-in-Stock**: 20% conversion rate
- **Loyalty Engagement**: 30% of loyalty members engage with monthly email

### Quarterly Review
- Review all metrics vs targets
- Identify underperforming templates
- A/B test optimizations
- Update content and design as needed
- Review customer feedback and make improvements

---

## Risks & Mitigation

| Risk | Impact | Mitigation |
|------|--------|------------|
| Email deliverability issues | High | Proper authentication (SPF/DKIM), warm-up period, monitor bounce/spam rates |
| Broken Freemarker variables | Medium | Thorough testing with sample data, fallback values |
| Mobile rendering issues | Medium | Test on multiple devices, use responsive design framework |
| Klaviyo integration downtime | Medium | Monitor integration health, have manual backup process |
| Customer unsubscribes | Low | Ensure transactional emails opt-out compliant, segment marketing carefully |
| Workflow not triggering | High | Test workflows thoroughly, set up alerts for failures |

---

## Future Enhancements

### Phase 2 (6-12 months post-launch)
- **SMS Notifications**: Add SMS option for order/shipment updates
- **Push Notifications**: Mobile app notifications for order status
- **AI Personalization**: Use AI to optimize send times, subject lines, content
- **Advanced Segmentation**: Behavioral triggers (browse abandonment, price drop alerts)
- **Video in Email**: Product videos, styling tips
- **AMP Emails**: Interactive emails (carousels, accordions, forms)

### Phase 3 (12+ months post-launch)
- **Multilingual Templates**: Spanish support for expansion
- **Regional Customization**: Canada-specific content
- **Loyalty Gamification**: Progress bars, achievement emails
- **Referral Program Emails**: Automated referral invitations and rewards
- **Re-engagement Campaigns**: Win-back inactive customers

---

## Appendix

### A. Brand Guidelines Reference
- Logo usage: [Link to brand guidelines]
- Color palette: [Link to style guide]
- Typography standards: [Link to font guide]
- Imagery style: [Link to photo library]

### B. Freemarker Variable Reference
Full list of available variables: [Link to NetSuite Freemarker docs]

### C. Email Client Support Matrix
Tested and supported email clients: [Link to compatibility chart]

### D. Klaviyo Flow Diagrams
Visual flowcharts for each Klaviyo automation: [Link to flow docs]

### E. Legal & Compliance
- CAN-SPAM compliance checklist
- Privacy policy
- Terms of service
- Unsubscribe policy

---

**Configuration Owner**: Marketing Team (primary), IT (technical support)
**Approval Required**: Marketing Director, CTO
**Review Frequency**: Quarterly
**Last Updated**: 2026-02-03

---

**END OF EMAIL TEMPLATES CONFIGURATION**
