# 070.020 - Promotion & Pricing Rules

**Process Area**: Market-to-ROI
**Configuration ID**: 070.020
**Priority**: Medium
**Estimated Effort**: 12 hours
**Dependencies**: 040.010 (Item Master), 030.010 (Customer Categories), 070.010 (Campaign Management)

---

## Overview

Configure a flexible promotion engine to support various discount types, stacking rules, channel targeting, and usage limits. Enable promotions including percentage discounts, dollar-off amounts, BOGO (Buy One Get One), free shipping, and gift with purchase. Implement coupon code management with single-use and multi-use codes, automatic application rules, and comprehensive tracking.

### Business Objectives
- Drive sales through targeted promotional offers
- Increase average order value with tiered discounts
- Reward loyalty program members with exclusive offers
- Clear excess inventory with targeted markdowns
- Compete effectively with promotional pricing
- Track promotion effectiveness and ROI

### Stakeholders
- **Primary**: Merchandising Team, Marketing Team, E-commerce Manager
- **Secondary**: Store Managers, Finance (margin impact), IT (integration)

---

## NetSuite Promotion Framework

NetSuite provides native promotion functionality through:
- **Promotions** (Setup > Marketing > Promotions)
- **Pricing** (Item pricing, customer pricing, price levels)
- **Discounts** (Transaction-level, item-level)

We will use **NetSuite Promotions** as the primary engine, supplemented with custom fields for enhanced tracking.

---

## Promotion Types

### 1. Percentage Off (% Off)

**Use Cases**:
- "20% Off All Sunglasses"
- "15% Off Storewide"
- "30% Off Clearance Items"

**Configuration**:
- **Type**: Percentage discount
- **Application**: Item-level or order-level
- **Scope**: All items, specific categories, specific items, or item groups

**NetSuite Setup**:
- Promotion Type: "Order Discount"
- Discount Type: "% Discount"
- Discount %: Enter percentage (e.g., 20)
- Apply To: "Entire Order" or "Qualifying Items"
- Qualifying Items: Item category/class filter (e.g., Category = "Premium Sunglasses")

**Example**: Summer Sale - 25% Off All Eyewear
- Promotion Code: `SUMMER25`
- Discount: 25%
- Applies To: All inventory items where Category contains "Sunglasses" or "Eyewear"
- Date Range: June 1 - August 31, 2026

---

### 2. Dollar Off ($ Off)

**Use Cases**:
- "$10 Off Orders Over $100"
- "$50 Off Premium Sunglasses"
- "Save $25 Today"

**Configuration**:
- **Type**: Fixed amount discount
- **Application**: Order-level or item-level
- **Minimum Thresholds**: Optional (e.g., $100 minimum order)

**NetSuite Setup**:
- Promotion Type: "Order Discount"
- Discount Type: "$ Discount"
- Discount Amount: Enter dollar amount (e.g., 10)
- Minimum Order Amount: Set threshold (optional)
- Apply To: "Entire Order" or "Qualifying Items"

**Example**: New Customer Welcome - $15 Off First Order
- Promotion Code: `WELCOME15`
- Discount: $15
- Minimum Order: $75
- Customer Qualification: New customers only (first order)
- Usage Limit: One per customer

---

### 3. Buy One Get One (BOGO)

**Use Cases**:
- "Buy One Get One 50% Off"
- "Buy Two Get One Free"
- "Buy 3 for the Price of 2"

**Configuration**:
- **Type**: Item-level promotion with free/discounted item
- **Application**: Specific items or categories
- **Ratio**: 1:1, 2:1, 3:2, etc.

**NetSuite Setup**:
- Promotion Type: "Free Item" or "Item Discount"
- Qualifying Items: Items that trigger the promotion
- Free/Discounted Item: Item received as benefit
- Quantity: Buy X, Get Y
- Discount: 100% (free) or percentage (50% off)

**Example**: Sport Sunglasses BOGO
- Promotion: Buy 1 Sport Sunglass, Get 1 50% Off
- Qualifying Items: Category = "Sport Sunglasses"
- Free Item: Same category, equal or lesser value
- Discount: 50% on second item
- Date Range: Memorial Day Weekend (May 23-26, 2026)

**Implementation Note**: NetSuite BOGO can be complex. Consider using:
- **Option A**: NetSuite native "Free Item" promotion (limited flexibility)
- **Option B**: Custom SuiteScript to apply BOGO logic at cart/order level
- **Recommendation**: Start with Option A for simple BOGO, develop Option B for complex scenarios

---

### 4. Free Shipping

**Use Cases**:
- "Free Shipping on Orders Over $75"
- "Free 2-Day Shipping for VIP Members"
- "Free Shipping This Weekend Only"

**Configuration**:
- **Type**: Shipping discount
- **Application**: Order-level
- **Conditions**: Minimum order amount, customer tier, specific items

**NetSuite Setup**:
- Promotion Type: "Shipping Discount"
- Discount Type: "$ Discount"
- Discount Amount: 100% or fixed amount (e.g., $9.99 standard shipping cost)
- Minimum Order Amount: Set threshold (e.g., $75)
- Apply To: All shipping methods or specific method

**Example**: Free Shipping Friday
- Promotion Code: `FREESHIP`
- Discount: 100% off standard shipping
- Minimum Order: $50
- Date Range: Every Friday
- Channels: E-commerce and mobile only

---

### 5. Gift with Purchase (GWP)

**Use Cases**:
- "Free Cleaning Kit with Any Purchase"
- "Free Sunglasses Case with Orders Over $150"
- "Free Gift: Mini Sunscreen with Premium Sunglasses"

**Configuration**:
- **Type**: Free item promotion
- **Application**: Order-level or item-level trigger
- **Gift Item**: Specific SKU added to order at $0

**NetSuite Setup**:
- Promotion Type: "Free Item"
- Qualifying Items/Amount: Order total or specific items
- Free Item: SKU of gift item (e.g., "Sunglass Cleaning Kit")
- Quantity: 1 (or more)
- Price: $0

**Example**: Holiday Gift - Free Case
- Promotion: Free hard case with any premium sunglass purchase
- Qualifying Items: Category = "Premium Sunglasses", Price > $150
- Free Item: "Branded Hard Case" (SKU: CASE-001)
- Inventory Impact: Deduct from gift inventory, no revenue
- Date Range: November 15 - December 31, 2026

**Implementation Note**: Ensure free gift items are flagged in inventory to avoid:
- Selling as standalone items
- Counting as revenue
- Triggering low-stock alerts inappropriately

---

## Promotion Stacking Rules

**Business Rule**: Define which promotions can be combined (stacked) on a single order.

### Stacking Matrix

| Promotion Type | Can Stack With | Cannot Stack With |
|----------------|----------------|-------------------|
| % Off | Free Shipping, GWP | $ Off, BOGO, Other % Off |
| $ Off | Free Shipping, GWP | % Off, BOGO, Other $ Off |
| BOGO | Free Shipping, GWP | % Off, $ Off, Other BOGO |
| Free Shipping | All promotions | Other Free Shipping |
| Gift with Purchase | All promotions | Other GWP for same item |

### Stacking Configuration

**NetSuite Setup**:
- **Exclusive Promotions**: Check "Exclusive" box on promotion record
  - Prevents stacking with other promotions
  - Use for high-value discounts (e.g., 40% off entire order)

- **Compatible Promotions**: Leave "Exclusive" unchecked
  - Can stack with other non-exclusive promotions
  - System will apply all applicable promotions

**Custom Field for Stacking Control**:

Create custom field: `custrecord_promo_stacking_group` (List)
- **Values**: "Discount", "Shipping", "Gift", "Loyalty"
- **Rule**: Only one promotion per stacking group can apply per order

**Example Stacking Scenarios**:

**Scenario 1: Allowed**
- Promotion A: 20% Off All Items (Stacking Group = "Discount")
- Promotion B: Free Shipping (Stacking Group = "Shipping")
- Result: Both apply ✓

**Scenario 2: Not Allowed**
- Promotion A: 20% Off (Stacking Group = "Discount")
- Promotion B: $25 Off (Stacking Group = "Discount")
- Result: Only highest-value promotion applies ✗

**Scenario 3: Loyalty Override**
- Promotion A: 15% Off (Stacking Group = "Discount")
- Loyalty Discount: 10% Off for Platinum members (Stacking Group = "Loyalty")
- Result: If loyalty stacking allowed, both apply; otherwise, highest applies

---

## Channel Targeting

Promotions can be targeted to specific sales channels:

### Channel Types
1. **E-commerce** (Shopify web store)
2. **Mobile App**
3. **In-Store** (Lightspeed POS)
4. **Phone Orders** (CSR)
5. **Wholesale** (B2B)

### Channel Configuration

**Custom Field**: `custrecord_promo_channels` (Multi-Select)
- E-commerce
- Mobile App
- In-Store
- Phone
- Wholesale
- All Channels

**Implementation**:
- Use SuiteScript to validate promotion eligibility based on order's `custbody_sales_channel` field
- Display applicable promotions in Shopify (web/mobile) based on channel targeting
- Enable/disable promotions at POS based on channel restrictions

**Example**:
- Promotion: "Online Exclusive - 25% Off"
- Channels: E-commerce, Mobile App only
- Result: Promotion code `ONLINE25` works on web/mobile, but not in-store or phone

---

## Date Ranges and Scheduling

### Date Configuration

**Standard Fields**:
- **Start Date**: Promotion becomes active (12:00 AM)
- **End Date**: Promotion expires (11:59 PM)
- **Time Zone**: Use customer's account time zone (typically PST/PDT for SunStyle)

### Scheduling Options

**1. Limited-Time Offers**
- Start Date: June 1, 2026
- End Date: June 7, 2026
- Example: "Week-Long Flash Sale"

**2. Seasonal Promotions**
- Start Date: June 1, 2026
- End Date: August 31, 2026
- Example: "Summer Sale"

**3. Ongoing/Evergreen**
- Start Date: January 1, 2026
- End Date: December 31, 2026 (or blank for no end)
- Example: "Free Shipping Over $75" (always active)

**4. Recurring Promotions**
- **Implementation**: Create separate promotion records for each occurrence
- Example: "Free Shipping Friday"
  - Promotion 1: Friday, June 5, 2026
  - Promotion 2: Friday, June 12, 2026
  - Promotion 3: Friday, June 19, 2026
  - etc.
- **Alternative**: Use saved search to identify recurring patterns, create via CSV import

**5. Flash Sales (Time-Sensitive)**
- Start Date/Time: 10:00 AM
- End Date/Time: 2:00 PM (same day)
- Example: "4-Hour Flash Sale"
- **Note**: NetSuite native promotions support date but not specific time. Use SuiteScript for hour-level control if needed.

---

## Usage Limits

### Limit Types

**1. Total Redemptions (System-Wide)**
- Limit total number of times promotion can be used across all customers
- Example: "First 100 customers get 30% off"
- **NetSuite Field**: "Maximum Uses" (on promotion record)

**2. Per Customer Limit**
- Limit number of times a single customer can use the promotion
- Example: "One per customer"
- **NetSuite Field**: "Maximum Uses per Customer"
- **Options**: 1 (one-time), 5 (up to 5 times), Unlimited

**3. Per Transaction Limit**
- Limit how many times promotion applies within a single order
- Example: "BOGO applies to first 2 pairs only"
- **Implementation**: Custom logic in SuiteScript

**4. New Customer Only**
- Limit promotion to customers with no prior orders
- Example: "Welcome offer for first-time buyers"
- **Implementation**: Custom validation script checks customer order history

### Usage Tracking

**Native NetSuite Tracking**:
- NetSuite automatically tracks promotion usage
- View: Promotion record > "Applications" subtab
- Shows: Order #, Customer, Date, Discount Amount

**Custom Usage Fields** (for enhanced reporting):

Create custom promotion fields:
1. `custrecord_promo_usage_count` (Integer)
   - Current usage count (updated via workflow/script)

2. `custrecord_promo_usage_limit` (Integer)
   - Maximum allowed uses (system-wide)

3. `custrecord_promo_per_customer_limit` (Integer)
   - Maximum uses per customer (default: 1)

4. `custrecord_promo_remaining_uses` (Integer - Formula)
   - Formula: `{custrecord_promo_usage_limit} - {custrecord_promo_usage_count}`

---

## Coupon Code Management

### Coupon Code Types

**1. Public Codes (Multi-Use)**
- Shared publicly (email, social media, website banner)
- Can be used by any customer
- Examples: `SUMMER20`, `WELCOME15`, `FREESHIP`
- Usage Limit: Typically high (unlimited or 1000+)

**2. Unique Codes (Single-Use)**
- Generated uniquely per customer or campaign
- One-time use only
- Examples: `VIP-A83F2D`, `LOYALTY-X9K2P`
- Usage Limit: 1 per code
- **Implementation**: Generate via SuiteScript or external tool, import as separate promotion records

**3. Auto-Applied Codes (No Code Required)**
- Automatically applied based on customer segment or cart contents
- No code entry needed
- Examples: "VIP members get 10% off automatically"
- **Implementation**: Use promotion eligibility criteria (customer category, loyalty tier)

### Code Generation and Management

**For Single-Use Codes**:

**Option A: SuiteScript Code Generator**
- Create SuiteScript to generate random alphanumeric codes
- Store codes as separate promotion records or in custom record
- Associate with customer or campaign
- Mark as "used" when redeemed

**Option B: External Tool + CSV Import**
- Generate codes in Excel/Google Sheets (using RAND functions)
- Format: `{PREFIX}-{RANDOM6}` (e.g., `VIP-A83F2D`)
- CSV Import: Create promotion records in bulk

**Recommendation**: Option A for small volumes (< 1000), Option B for large campaigns

### Code Validation

**At Order Entry**:
1. Customer enters code at checkout (web) or CSR enters (phone/in-store)
2. System validates:
   - Code exists and is active
   - Current date within promotion date range
   - Usage limits not exceeded (system-wide and per-customer)
   - Customer qualifies (segment, tier, channel)
   - Cart qualifies (minimum amount, qualifying items)
3. If valid: Apply discount
4. If invalid: Display error message with reason

**Error Messages**:
- "Promotion code not found"
- "Promotion code expired"
- "Promotion code usage limit reached"
- "You have already used this code"
- "Promotion code not valid for this channel"
- "Order does not meet minimum amount"

---

## Customer Qualification Rules

### Qualification Criteria

**1. Customer Category**
- Retail, Online, Wholesale, Employee, VIP
- Example: "VIP-only exclusive offer"

**2. Loyalty Tier**
- Silver, Gold, Platinum
- Example: "Platinum members get 15% off"

**3. Customer Tags/Segments**
- New customer, Loyal, At-Risk, Lapsed
- Example: "Win-back offer for lapsed customers"

**4. Customer Location**
- State, ZIP code, region
- Example: "California residents get free shipping"

**5. Order History**
- First order, repeat customer, high-value customer
- Example: "First-time buyer discount"

### Configuration in NetSuite

**Native Eligibility**:
- Promotion > Eligibility tab
- **Customer Qualification**: Select customer categories, price levels, or specific customers

**Custom Eligibility** (via SuiteScript):
- Create before-submit script on Sales Order
- Validate promotion code against custom criteria:
  - Loyalty tier: `customer.custentity_loyalty_tier`
  - Customer segment: `customer.custentity_customer_segment`
  - Order count: Query transaction history
- If ineligible: Remove promotion, display error

---

## Item Qualification Rules

### Qualifying Items for Promotion

**1. All Items**
- Promotion applies to entire catalog
- Example: "20% off everything"

**2. Specific Category**
- Promotion applies to item category/class
- Example: "30% off Premium Sunglasses"
- **Filter**: Item Category = "Premium Sunglasses"

**3. Specific Brand**
- Promotion applies to items from specific brand
- Example: "Ray-Ban sale: 25% off"
- **Filter**: `custitem_brand` = "Ray-Ban"

**4. Specific Items (SKU List)**
- Promotion applies to explicit SKU list
- Example: "Select clearance items"
- **Filter**: Item Internal ID in [list]

**5. Minimum Price**
- Promotion applies to items above price threshold
- Example: "$20 off items over $100"
- **Filter**: Item Price > $100

**6. Exclusions**
- Exclude specific items/categories from promotion
- Example: "20% off entire store (excludes sale items)"
- **Filter**: Item Category ≠ "Clearance"

### Configuration in NetSuite

**Promotion > Qualifying Items Tab**:
- **Include**: Select items, categories, or classes that qualify
- **Exclude**: Select items, categories, or classes to exclude
- **Search**: Use saved search to define complex item criteria

**Example Saved Search** (Premium Sunglasses over $100):
- Criteria: Item Type = Inventory Item
- Category = "Premium Sunglasses"
- Base Price > $100
- Inactive = False

---

## Promotion Priority and Conflict Resolution

### Priority Rules

When multiple promotions apply to an order, NetSuite determines which to use:

**1. Exclusive Promotions (Highest Priority)**
- If "Exclusive" checkbox is marked, no other promotions can apply
- Used for high-value, standalone offers

**2. Best Price for Customer**
- NetSuite automatically applies the promotion that gives the customer the best discount
- Compares total discount amount across all applicable promotions
- Applies the most beneficial one (if exclusive conflict)

**3. Manual Priority Setting**
- Assign priority numbers to promotions (1 = highest)
- Lower number = higher priority
- Example: Priority 1 = Loyalty discount, Priority 2 = Seasonal sale

**4. Stacking Groups** (Custom)
- Use custom field to group promotions
- Apply only one per group (see Stacking Rules above)

### Conflict Resolution Examples

**Scenario 1: Two Exclusive Promotions**
- Promotion A: 30% off (Exclusive)
- Promotion B: $50 off (Exclusive)
- Order Total: $200
- Result: Promotion B applies ($50 off > $60 off from 30%), unless priority overrides

**Scenario 2: Loyalty + Seasonal Sale**
- Loyalty: 10% off (Non-exclusive, Priority 1)
- Seasonal: 20% off (Non-exclusive, Priority 2)
- If Stacking Allowed: Both apply (28% total off)
- If Not Stacking: Seasonal applies (better deal)

---

## Promotion Performance Tracking

### Key Metrics

**1. Redemption Rate**
- (Orders with Promo Code) / (Total Orders) × 100
- Target: > 25% of orders use a promotion

**2. Promotion ROI**
- (Revenue from Promo Orders - Promo Cost - Discount Given) / (Discount Given)
- Positive ROI indicates promotion drove incremental sales

**3. Average Discount per Order**
- Total Discount Amount / Orders with Discount
- Monitor to ensure margin preservation

**4. Uplift Analysis**
- Compare sales with promotion vs. baseline (no promotion)
- Measure incremental revenue driven by promotion

### Tracking Fields

Create custom transaction fields:

**On Sales Order**:
1. `custbody_promotion_code_used` (Text)
   - Stores actual code entered by customer

2. `custbody_promotion_discount_amount` (Currency)
   - Total discount applied from promotions

3. `custbody_promotion_discount_pct` (Percent)
   - Percentage discount (for reporting)

4. `custbody_promotion_type` (List)
   - % Off, $ Off, BOGO, Free Shipping, GWP

**On Promotion Record**:
1. `custrecord_promo_revenue` (Currency - Formula)
   - Sum of revenue from orders using this promo

2. `custrecord_promo_orders` (Integer - Formula)
   - Count of orders using this promo

3. `custrecord_promo_avg_order_value` (Currency - Formula)
   - Average order value for promo orders

### Reporting

**Promotion Performance Report**:
- **Saved Search**: Promotion records with usage metrics
- **Columns**: Promotion Name, Code, Type, Start/End Date, Usage Count, Revenue, Discount Given, ROI
- **Filters**: Date range, promotion type, active/inactive

**Discount Impact Report**:
- **Saved Search**: Sales orders with promotion fields
- **Columns**: Order #, Customer, Promo Code, Discount %, Discount $, Order Total, Margin Impact
- **Summary**: Total discount given by period, channel, promotion type

---

## Margin Protection Rules

### Business Rules

**1. Maximum Discount Limits**
- **Retail/E-commerce**: Max 40% off per item (protect margin)
- **Wholesale**: Max 20% off (already discounted)
- **Clearance**: Max 70% off (liquidation)

**2. Minimum Margin Thresholds**
- Ensure gross margin > 30% after discount
- If margin falls below threshold, flag for approval

**3. Manager Override**
- Store managers can approve discounts beyond limits
- Requires approval workflow
- Logged for audit

### Implementation

**Validation Script**:
- Before-submit script on Sales Order
- Calculate margin after discount
- If margin < threshold:
  - Set status to "Pending Approval"
  - Route to Store Manager or E-commerce Manager
  - Display warning message

**Custom Fields for Approval**:
1. `custbody_discount_override_required` (Checkbox)
2. `custbody_discount_override_approved_by` (Employee)
3. `custbody_discount_override_reason` (Long Text)

---

## Integration with External Systems

### Shopify Integration

**Outbound (NetSuite → Shopify)**:
- Sync active promotion codes
- Publish promotions for display on website
- Update discount rules in Shopify

**Inbound (Shopify → NetSuite)**:
- Capture promotion code from web orders
- Map Shopify discount to NetSuite promotion
- Track usage and revenue

**Mapping**:
- NetSuite Promotion Code = Shopify Discount Code
- Sync promotion date ranges, usage limits
- Real-time validation when customer enters code

### Lightspeed POS Integration

**At Checkout**:
- Cashier enters promotion code or selects from list
- POS sends code to NetSuite for validation
- NetSuite returns discount amount
- POS applies discount to transaction

**Offline Mode**:
- If NetSuite unavailable, POS uses cached promotion list
- Applies discount locally, syncs usage to NetSuite when online

---

## Testing Scenarios

### Test Case 1: Percentage Discount
- Create promotion: 20% off all items
- Code: `TEST20`
- Add items to cart, apply code
- Verify 20% discount applied
- Verify usage count incremented

### Test Case 2: Dollar Off with Minimum
- Create promotion: $25 off orders over $100
- Code: `SAVE25`
- Test with $99 order (should fail)
- Test with $101 order (should succeed)

### Test Case 3: BOGO
- Create promotion: Buy 1 Get 1 50% Off
- Add 2 items to cart
- Verify lower-priced item discounted 50%

### Test Case 4: Free Shipping
- Create promotion: Free shipping over $75
- Test with $74.99 order (should fail)
- Test with $75.01 order (should succeed)

### Test Case 5: Stacking
- Create two non-exclusive promotions
- Apply both to order
- Verify both discounts applied
- Create exclusive promotion
- Verify only one discount applies

### Test Case 6: Channel Restriction
- Create online-only promotion
- Test in Shopify (should succeed)
- Test at POS (should fail)

### Test Case 7: Usage Limits
- Create promotion with "Max 1 per customer"
- Customer places order using code
- Same customer attempts to use code again (should fail)

---

## Implementation Plan

### Week 1: Foundation
- Define promotion types and stacking rules
- Create custom fields for enhanced tracking
- Configure promotion record form

### Week 2: Build Promotions
- Create standard promotions (% Off, $ Off, Free Shipping)
- Test in sandbox environment
- Validate calculations and tracking

### Week 3: Advanced Promotions
- Implement BOGO logic (SuiteScript if needed)
- Configure GWP promotions
- Build coupon code generator (if single-use codes needed)

### Week 4: Integration & Testing
- Integrate with Shopify discount codes
- Sync with Lightspeed POS
- End-to-end testing across all channels
- Train merchandising and marketing teams

---

## Training Requirements

### Merchandising Team
- Creating and managing promotions
- Setting date ranges and usage limits
- Monitoring promotion performance

### Marketing Team
- Generating coupon codes
- Promoting offers across channels
- Analyzing promotion ROI

### Store Teams
- Entering promotion codes at POS
- Handling customer questions about offers
- Applying manager override for discounts

### IT Team
- Integration with Shopify and POS
- Troubleshooting promotion issues
- Custom code development for complex scenarios

---

## Success Metrics

- **Promotion Usage**: > 30% of orders use a promotion
- **Average Discount**: 15-20% (maintain healthy margin)
- **Promotion ROI**: > 2:1 (every $1 discount generates $2 incremental revenue)
- **Code Validation Time**: < 1 second (fast checkout)
- **Error Rate**: < 1% (accurate code validation)

---

## Open Questions / Decisions Needed

1. **BOGO Implementation**: Use native NetSuite or custom SuiteScript?
2. **Stacking Policy**: Which promotions can stack? Confirm matrix.
3. **Maximum Discount**: Confirm 40% max for retail/e-commerce.
4. **Manager Override Process**: Confirm approval workflow and thresholds.
5. **Single-Use Codes**: Volume needed? (Determines implementation approach)
6. **Influencer Tracking**: Unique codes for each influencer partnership?

---

**Configuration Owner**: Merchandising Team
**Technical Owner**: IT/Integration Team
**Business Owner**: Marketing Team

**Status**: Ready for Implementation
**Last Updated**: 2026-02-04
